<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Page Verification Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .test-result {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
        }
        .test-success {
            background: #d4edda;
            border: 1px solid #c3e6cb;
        }
        .test-error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
        }
        .test-pending {
            background: #fff3cd;
            border: 1px solid #ffeeba;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="mb-4">ðŸ§ª Page Verification Test</h1>
        <p class="lead">Testing all 54 specialized pages...</p>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">Test Progress</h5>
                    </div>
                    <div class="card-body">
                        <div class="progress mb-3">
                            <div class="progress-bar" id="progressBar" role="progressbar" style="width: 0%"></div>
                        </div>
                        <p><strong>Total:</strong> <span id="totalPages">54</span></p>
                        <p><strong>Tested:</strong> <span id="testedPages">0</span></p>
                        <p><strong>Success:</strong> <span id="successPages" class="text-success">0</span></p>
                        <p><strong>Failed:</strong> <span id="failedPages" class="text-danger">0</span></p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">Quick Stats</h5>
                    </div>
                    <div class="card-body">
                        <p><strong>Success Rate:</strong> <span id="successRate">0%</span></p>
                        <p><strong>Time Elapsed:</strong> <span id="timeElapsed">0s</span></p>
                        <p><strong>Status:</strong> <span id="testStatus" class="badge bg-warning">Pending</span></p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-4">
            <button id="startTest" class="btn btn-primary btn-lg">Start Verification</button>
            <button id="stopTest" class="btn btn-danger btn-lg" disabled>Stop Test</button>
        </div>
        
        <div class="mt-4">
            <h3>Test Results:</h3>
            <div id="testResults"></div>
        </div>
    </div>

    <script>
        const pages = [
            // Price-based
            'deals-under-500.php', 'deals-under-1000.php', 'deals-under-2000.php',
            'deals-500-1000.php', 'deals-1000-5000.php', 'premium-deals.php', 'luxury-deals.php',
            
            // Discount-based
            'hot-deals.php', 'super-saver.php', 'mega-discounts.php',
            'deals-25-percent-off.php', 'deals-30-percent-off.php', 'clearance-sale.php',
            
            // Store-specific
            'amazon-deals.php', 'flipkart-deals.php',
            
            // Time-based
            'todays-deals.php', 'weekly-deals.php', 'weekend-special.php', 'flash-sale.php',
            
            // Special collections
            'new-arrivals.php', 'trending.php', 'best-sellers.php', 'editors-choice.php',
            'limited-stock.php', 'free-delivery.php', 'top-rated.php', 'most-saved.php',
            
            // Savings-focused
            'maximum-savings.php', 'best-value.php', 'combo-deals.php',
            
            // Categories
            'electronics-deals.php', 'fashion-deals.php', 'home-kitchen.php', 'beauty-deals.php',
            'sports-fitness.php', 'books-media.php', 'toys-kids.php', 'automotive.php',
            'health-wellness.php', 'pet-supplies.php',
            
            // Event-based
            'festival-sale.php', 'month-end-sale.php', 'payday-special.php', 'midnight-deals.php',
            
            // Price tracking
            'price-drop-alert.php', 'lowest-prices.php',
            
            // Special offers
            'recommended-deals.php', 'deal-of-day.php', 'last-chance.php',
            'buy-1-get-1.php', 'gift-ideas.php', 'eco-friendly.php',
            'handmade-deals.php', 'local-sellers.php'
        ];

        let tested = 0;
        let success = 0;
        let failed = 0;
        let testing = false;
        let startTime;

        document.getElementById('startTest').addEventListener('click', startTest);
        document.getElementById('stopTest').addEventListener('click', stopTest);

        async function startTest() {
            testing = true;
            tested = 0;
            success = 0;
            failed = 0;
            startTime = Date.now();
            
            document.getElementById('startTest').disabled = true;
            document.getElementById('stopTest').disabled = false;
            document.getElementById('testStatus').textContent = 'Testing...';
            document.getElementById('testStatus').className = 'badge bg-warning';
            document.getElementById('testResults').innerHTML = '';

            for (let page of pages) {
                if (!testing) break;
                await testPage(page);
                tested++;
                updateProgress();
            }

            if (testing) {
                document.getElementById('testStatus').textContent = 'Complete';
                document.getElementById('testStatus').className = 'badge bg-success';
            }
            
            document.getElementById('startTest').disabled = false;
            document.getElementById('stopTest').disabled = true;
        }

        function stopTest() {
            testing = false;
            document.getElementById('testStatus').textContent = 'Stopped';
            document.getElementById('testStatus').className = 'badge bg-danger';
            document.getElementById('startTest').disabled = false;
            document.getElementById('stopTest').disabled = true;
        }

        async function testPage(page) {
            const resultsDiv = document.getElementById('testResults');
            const resultDiv = document.createElement('div');
            resultDiv.className = 'test-result test-pending';
            resultDiv.innerHTML = `â³ Testing: ${page}...`;
            resultsDiv.appendChild(resultDiv);

            try {
                const response = await fetch(page);
                if (response.ok) {
                    success++;
                    resultDiv.className = 'test-result test-success';
                    resultDiv.innerHTML = `âœ… Success: ${page} - Status: ${response.status}`;
                } else {
                    failed++;
                    resultDiv.className = 'test-result test-error';
                    resultDiv.innerHTML = `âŒ Failed: ${page} - Status: ${response.status}`;
                }
            } catch (error) {
                failed++;
                resultDiv.className = 'test-result test-error';
                resultDiv.innerHTML = `âŒ Error: ${page} - ${error.message}`;
            }

            // Scroll to latest result
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        function updateProgress() {
            const progress = (tested / pages.length) * 100;
            const successRate = tested > 0 ? (success / tested) * 100 : 0;
            const timeElapsed = ((Date.now() - startTime) / 1000).toFixed(1);

            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressBar').textContent = progress.toFixed(0) + '%';
            document.getElementById('testedPages').textContent = tested;
            document.getElementById('successPages').textContent = success;
            document.getElementById('failedPages').textContent = failed;
            document.getElementById('successRate').textContent = successRate.toFixed(1) + '%';
            document.getElementById('timeElapsed').textContent = timeElapsed + 's';
        }
    </script>
</body>
</html>